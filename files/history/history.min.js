/*!
 * History API JavaScript Library v4.1.7
 *
 * Support: IE6+, FF3+, Opera 9+, Safari, Chrome and other
 *
 * Copyright 2011-2014, Dmitrii Pakhtinov ( spb.piksel@gmail.com )
 *
 * http://spb-piksel.ru/
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Update: 2014-05-19 16:57
 */
(function(O){"function"===typeof define&&define.amd?define("object"!==typeof document||"loading"!==document.readyState?[]:"html5-history-api",O):O()})(function(){var i=!0,l=null,n=!1;function P(a,b){var c=e.history!==m;c&&(e.history=m);a.apply(m,b);c&&(e.history=j)}function J(){}function k(a,b,c){if(a!=l&&""!==a&&!b)var b=k(),c=b.e,g=b.h,a=""+a,a=/^(?:[\w0-9]+\:)?\/\//.test(a)?0===a.indexOf("/")?g+a:a:g+"//"+b.g+(0===a.indexOf("/")?a:0===a.indexOf("?")?c+a:0===a.indexOf("#")?c+b.f+a:c.replace(/[^\/]+$/g,"")+a);else if(a=b?a:d.href,!p||c)a=a.replace(/^[^#]*/,"")||"#",a=d.protocol.replace(/:.*$|$/,":")+"//"+d.host+h.basepath+a.replace(RegExp("^#[/]?(?:"+h.type+")?"),
"");Q.href=a;var a=/(?:([\w0-9]+:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/.exec(Q.href),b=a[2]+(a[3]?":"+a[3]:""),c=a[4]||"/",g=a[5]||"",e="#"===a[6]?"":a[6]||"",f=c+g+e,u=c.replace(RegExp("^"+h.basepath,"i"),h.type)+g;return{a:a[1]+"//"+b+f,h:a[1],g:b,i:a[2],k:a[3]||"",e:c,f:g,b:e,c:f,j:u,d:u+e}}function $(){var a;try{a=e.sessionStorage,a.setItem(E+"t","1"),a.removeItem(E+"t")}catch(b){a={getItem:function(a){a=f.cookie.split(a+"=");return 1<a.length&&
a.pop().split(";").shift()||"null"},setItem:function(a){var b={};if(b[d.href]=j.state)f.cookie=a+"="+q.stringify(b)}}}try{o=q.parse(a.getItem(E))||{}}catch(c){o={}}v(w+"unload",function(){a.setItem(E,q.stringify(o))},n)}function x(a,b,c,g){var c=c||{set:J},d=!c.set,f=!c.get,u={configurable:i,set:function(){d=1},get:function(){f=1}};try{C(a,b,u),a[b]=a[b],C(a,b,c)}catch(ia){}if(!d||!f)if(a.__defineGetter__&&(a.__defineGetter__(b,u.get),a.__defineSetter__(b,u.set),a[b]=a[b],c.get&&a.__defineGetter__(b,
c.get),c.set&&a.__defineSetter__(b,c.set)),(!d||!f)&&a===e){try{var aa=a[b];a[b]=l}catch(ja){}if("execScript"in e)e.execScript("Public "+b,"VBScript"),e.execScript("var "+b+";","JavaScript");else try{C(a,b,{value:J})}catch(j){}a[b]=aa}else if(!d||!f)try{try{var y=F.create(a);C(F.getPrototypeOf(y)===a?y:a,b,c);for(var k in a)"function"===typeof a[k]&&(y[k]=a[k].bind(a));try{g.call(y,y,a)}catch(h){}a=y}catch(m){C(a.constructor.prototype,b,c)}}catch(o){return n}return a}function ba(a,b,c){c=c||{};a=
a===K?d:a;c.set=c.set||function(c){a[b]=c};c.get=c.get||function(){return a[b]};return c}function ca(a,b,c){a in z?z[a].push(b):3<arguments.length?v(a,b,c,arguments[3]):v(a,b,c)}function da(a,b,c){var e=z[a];if(e)for(a=e.length;--a;){if(e[a]===b){e.splice(a,1);break}}else R(a,b,c)}function G(a,b){var c=(""+("string"===typeof a?a:a.type)).replace(/^on/,""),g=z[c];if(g){b="string"===typeof a?b:a;if(b.target==l)for(var d=["target","currentTarget","srcElement","type"];a=d.pop();)b=x(b,a,{get:"type"===
a?function(){return c}:function(){return e}});(("popstate"===c?e.onpopstate:e.onhashchange)||J).call(e,b);for(var d=0,f=g.length;d<f;d++)g[d].call(e,b);return i}return ea(a,b)}function S(){var a=f.createEvent?f.createEvent("Event"):f.createEventObject();a.initEvent?a.initEvent("popstate",n,n):a.type="popstate";a.state=j.state;G(a)}function r(a,b,c,e){p||(b=k(b),b.c!==k().c&&(A=e,c?d.replace("#"+b.d):d.hash=b.d));!H&&a&&(o[d.href]=a);D=n}function L(a){var b=A;A=d.href;if(b){T!==d.href&&S();var a=a||
e.event,b=k(A,i),c=k();a.oldURL||(a.oldURL=b.a,a.newURL=c.a);b.b!==c.b&&G(a)}}function U(a){setTimeout(function(){v("popstate",function(a){T=d.href;H||(a=x(a,"state",{get:function(){return j.state}}));G(a)},n)},0);!p&&(a!==i&&j.location)&&(V(j.location.hash),D&&(D=n,S()))}function fa(a){var a=a||e.event,b;a:{for(b=a.target||a.srcElement;b;){if("A"===b.nodeName)break a;b=b.parentNode}b=void 0}var c="defaultPrevented"in a?a.defaultPrevented:a.returnValue===n;b&&("A"===b.nodeName&&!c)&&(c=k(),b=k(b.getAttribute("href",
2)),c.a.split("#").shift()===b.a.split("#").shift()&&b.b&&(c.b!==b.b&&(j.location.hash=b.b),V(b.b),a.preventDefault?a.preventDefault():a.returnValue=n))}function V(a){var b=f.getElementById(a=(a||"").replace(/^#/,""));b&&(b.id===a&&"A"===b.nodeName)&&(a=b.getBoundingClientRect(),e.scrollTo(I.scrollLeft||0,a.top+(I.scrollTop||0)-(I.clientTop||0)))}function ga(){function a(a){var b=[],d="VBHistoryClass"+(new Date).getTime()+c++,g=["Class "+d],f;for(f in a)if(a.hasOwnProperty(f)){var h=a[f];h&&(h.get||
h.set)?(h.get&&g.push("Public "+("_"===f?"Default ":"")+"Property Get ["+f+"]","Call VBCVal([(accessors)].["+f+"].get.call(me),["+f+"])","End Property"),h.set&&g.push("Public Property Let ["+f+"](val)",h="Call [(accessors)].["+f+"].set.call(me,val)\nEnd Property","Public Property Set ["+f+"](val)",h)):(b.push(f),g.push("Public ["+f+"]"))}g.push("Private [(accessors)]","Private Sub Class_Initialize()","Set [(accessors)]="+d+"FactoryJS()","End Sub","End Class","Function "+d+"Factory()","Set "+d+"Factory=New "+
d,"End Function");e.execScript(g.join("\n"),"VBScript");e[d+"FactoryJS"]=function(){return a};d=e[d+"Factory"]();for(g=0;g<b.length;g++)d[b[g]]=a[b[g]];return d}function b(a){var b=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return b.test(a)?'"'+a.replace(b,function(a){return a in c?c[a]:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+
'"':'"'+a+'"'}var c=e.eval&&eval("/*@cc_on 1;@*/");if(c&&!(f.documentMode&&7<f.documentMode)){var g=x,h=k().a,s=f.createElement("iframe");s.src="javascript:true;";s=I.firstChild.appendChild(s).contentWindow;e.execScript("Public history\nFunction VBCVal(o,r) If IsObject(o) Then Set r=o Else r=o End If End Function","VBScript");t={_:{get:K.toString}};j={back:m.back,forward:m.forward,go:m.go,emulate:l,_:{get:function(){return"[object History]"}}};q={parse:function(a){try{return(new Function("","return "+
a))()}catch(b){return l}},stringify:function(a){var c=(typeof a).charCodeAt(2);if(114===c)a=b(a);else if(109===c)a=isFinite(a)?""+a:"null";else if(111===c||108===c)a=""+a;else if(106===c)if(a){var e=(c="[object Array]"===F.prototype.toString.call(a))?"[":"{";if(c)for(var d=0;d<a.length;d++)e+=(0==d?"":",")+q.stringify(a[d]);else for(d in a)a.hasOwnProperty(d)&&(e+=(1==e.length?"":",")+b(d)+":"+q.stringify(a[d]));a=e+(c?"]":"}")}else a="null";else a="void 0";return a}};r=function(a,b,c,e,g){var f=
s.document,b=k(b);D=n;if(b.c===k().c&&!g)a&&(o[d.href]=a);else{A=e;if(c)s.lfirst?(history.back(),r(a,b.a,0,e,1)):d.replace("#"+b.d);else if(b.a!=h||g)s.lfirst?g&&(g=0,a=o[d.href]):(s.lfirst=1,r(a,h,0,e,1)),f.open(),f.write('<script>lfirst=1;parent.location.hash="'+b.d.replace(/"/g,'\\"')+'";<\/script>'),f.close();!g&&a&&(o[d.href]=a)}};x=function(b,c,d,f){g.apply(this,arguments)||(b===t?t[c]=d:b===j?(j[c]=d,"state"===c&&(t=a(t),e.history=j=a(j),e.execScript("var history = window.history;","JavaScript"))):
b[c]=d.get&&d.get());return b};setInterval(function(){var a=k().a;if(a!=h){var b=f.createEventObject();b.oldURL=h;b.newURL=h=a;b.type="hashchange";L(b)}},100);e.JSON=q}}var e=("object"===typeof window?window:this)||{};if(!e.history||"emulate"in e.history)return e.history;var f=e.document,I=f.documentElement,F=e.Object,q=e.JSON,d=e.location,m=e.history,j=m,M=m.pushState,W=m.replaceState,p=!!M,H="state"in m,C=F.defineProperty,t=x({},"t")?{}:f.createElement("a"),w="",N=e.addEventListener?"addEventListener":
(w="on")&&"attachEvent",X=e.removeEventListener?"removeEventListener":"detachEvent",Y=e.dispatchEvent?"dispatchEvent":"fireEvent",v=e[N],R=e[X],ea=e[Y],h={basepath:"/",redirect:0,type:"/"},E="__historyAPI__",Q=f.createElement("a"),A=d.href,T="",D=n,o={},z={},B=f.title,ha={onhashchange:l,onpopstate:l},Z={setup:function(a,b,c){h.basepath=(""+(a==l?h.basepath:a)).replace(/(?:^|\/)[^\/]*$/,"/");h.type=b==l?h.type:b;h.redirect=c==l?h.redirect:!!c},redirect:function(a,b){j.setup(b,a);b=h.basepath;if(e.top==
e.self){var c=k(l,n,i).c,g=d.pathname+d.search;p?(g=g.replace(/([^\/])$/,"$1/"),c!=b&&RegExp("^"+b+"$","i").test(g)&&d.replace(c)):g!=b&&(g=g.replace(/([^\/])\?/,"$1/?"),RegExp("^"+b,"i").test(g)&&d.replace(b+"#"+g.replace(RegExp("^"+b,"i"),h.type)+d.hash))}},pushState:function(a,b,c){var e=f.title;B!=l&&(f.title=B);M&&P(M,arguments);r(a,c);f.title=e;B=b},replaceState:function(a,b,c){var e=f.title;B!=l&&(f.title=B);delete o[d.href];W&&P(W,arguments);r(a,c,i);f.title=e;B=b},location:{set:function(a){e.location=
a},get:function(){return p?d:t}},state:{get:function(){return o[d.href]||l}}},K={assign:function(a){0===(""+a).indexOf("#")?r(l,a):d.assign(a)},reload:function(){d.reload()},replace:function(a){0===(""+a).indexOf("#")?r(l,a,i):d.replace(a)},toString:function(){return this.href},href:{get:function(){return k().a}},protocol:l,host:l,hostname:l,port:l,pathname:{get:function(){return k().e}},search:{get:function(){return k().f}},hash:{set:function(a){r(l,(""+a).replace(/^(#|)/,"#"),n,A)},get:function(){return k().b}}};
if(function(){var a=f.getElementsByTagName("script"),a=(a[a.length-1]||{}).src||"";(-1!==a.indexOf("?")?a.split("?").pop():"").replace(/(\w+)(?:=([^&]*))?/g,function(a,b,c){h[b]=(c||"").replace(/^(0|false)$/,"")});ga();v(w+"hashchange",L,n);var b=[K,t,ha,e,Z,j];H&&delete Z.state;for(var c=0;c<b.length;c+=2)for(var d in b[c])if(b[c].hasOwnProperty(d))if("function"===typeof b[c][d])b[c+1][d]=b[c][d];else{a=ba(b[c],d,b[c][d]);if(!x(b[c+1],d,a,function(a,d){if(d===j)e.history=j=b[c+1]=a}))return R(w+
"hashchange",L,n),n;b[c+1]===e&&(z[d]=z[d.substr(2)]=[])}j.setup();h.redirect&&j.redirect();!H&&q&&$();if(!p)f[N](w+"click",fa,n);"complete"===f.readyState?U(i):(!p&&k().c!==h.basepath&&(D=i),v(w+"load",U,n));return i}())return j.emulate=!p,e[N]=ca,e[X]=da,e[Y]=G,j});